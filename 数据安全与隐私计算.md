# 概述

性能指标：隐私保护强度

市场规模：预计2024年达到200亿RMB

应用场景：

- 理财产品客户营销
- 小贷风控，数据整合

隐私计算技术分类：

- 安全多方计算MPC（互不信任，不泄露原始数据前提下，多方协同计算。安全协议）
- 联邦学习（保证数据安全的前提下进行机器学习。协作者C参与。）![image-20220713053005292](https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713053005292.png)
- 机密计算（基于硬件）

![image-20220713053127965](https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713053127965.png)



# 隐私计算&区块链

区块链与隐私计算具有互补性

Webank Fair 趣链科技 八分量：税务平台

星云基因：Oasis network



# 联邦学习 Federated Model

数据分布在大量客户端上的场景中，训练一个高效的集中式模型。

S1：服务器随机选择一个客户端子集，该子集中的客户端将全局模型下载到本地。

S2：子集中的每个客户端执行一定轮次的模型训练并计算局部梯度。

S3：子集中的客户端将其局部梯度发送到服务器。

S4：服务器接受局部梯度并整合构建全局梯度。

…循环直到收敛。

<img src="https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713054607118.png" alt="image-20220713054607118" style="zoom:50%;" />

## Applications:

G-Board; Apple personalized Siri; Intel: Brain tumor detection



## 存在的问题：

异构性

- Statistical Heterogeneity
  - Unbalanced, non-IID data 数据分布导致表现差异
- Systems Heterogeneity
  - Variable hardware, connectivity 硬件水平不同，等待最慢的机器

通讯与安全

- Communication cost
  - Massive, slow networks 需要压缩通讯轮次，缩小模型
- Security & Robustness 
  - Malicious client attack 由于缺乏对局部梯度的身份认证，易受拜占庭客户端攻击（梯度放缩攻击，全零、反向梯度攻击）
  - Server Vulnerability 无完全可信的中心服务器，恶意服务器存在



## 解决思路：

去中心化联邦学习架构

- Brain Torrent-based
- Gossip-based
- Blockchain-based 设备+矿工



## Limitations:

Current Byzantine-tolerance algorithms

- Cannot achieve satisfactory performance
- Cannot provide effective defense in the presence of malicious servers

Current decentralizard FL frameworks

- Not resistant to Byzantine attacks
- High communication overhead



# CMFL

A Decentralized Federated Learning Framework with Committee Mechanism

![image-20220713061444546](https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713061444546.png)

## 节点构成：

训练客户端 —— 获取全局模型、训练模型、上传本地更新参数 

委员会客户端—— 获取训练者模型更新、验证模型更新、选择聚合客户端、参与共识 

聚合客户端——模型更新满足委员会选择策略，并参与全局模型聚合 

空闲客户端——不参与本轮次模型更新

## 功能模块：

评分模块：委员会客户端根据既定的评分系统对训练客户端的局部梯度进行评分

选择模块：符合选择策略的合格梯度被选中用于构建全局梯度 

选举模块: 选举策略旨在完成委员会成员的更替。所有委员会客户端进行投票选举，部分符合选举策略的训练客户端成为下一轮的委员会客户端 

委员会共识协议：基于 pBFT的委员会共识协议，以请确保选择、聚合和选举等过程的正确执行

## 技术流程

0. 初始时通过智能合约对全局模型初始化， 随机挑选客户端作为委员会节点，剩余作 为训练节点。

1. 训练节点首先获取区块链中最新的全局模 型

2. 然后训练者利用本地数据进行本地训练

3. 训练节点通过合约接口获取委员会节点信 息，传输模型更新到委员会节点

4. 委员会节点对模型进行验证后，将模型更 新上传到区块链

5. 委员会节点可以获取所有模型更新

6. 委员会节点利用本地数据验证模型更新，并进行评分，然后再上传到区块 链

7. 区块链中的智能合约自动聚合评分，并依据评分聚合模型更新，形成新 一轮的全局模型。

8. 最后基于评分自动选举出新一轮的委员会节点

9. 同理，下一轮训练如此进行



## 模块功能

### Scoring System

The scoring system based on Euclidean distance to distinguish malicious and honest gradients

- Honest gradients get a high score 
- Malicious gradients get a low score

### Selection Strategy

我们设计了两种相反的选择策略来确定用于更新全局模型的局部梯度。

S1

- Consideration: Robustness 鲁棒性 
- Applicable scenario: Byzantine attack scenario 攻击场景下

<img src="https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713062508372.png" alt="image-20220713062508372" style="zoom:33%;" />

S2

- Consideration: Heterogeneity 数据异构性 

- Applicable scenario: Non-attack scenario 无攻击场景下

<img src="https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713062831168.png" alt="image-20220713062831168" style="zoom:50%;" />

### Election Strategy

选举策略旨在保证委员会客户的诚实

Considerations

- Robustness 鲁棒性 
- System Stability 系统稳定性

![image-20220713062941454](https://img-1306232697.cos.ap-chongqing.myqcloud.com/obsidian_img/image-20220713062941454.png)

### 委员会共识协议CCP: Committee Consensus Protocol

